<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seeds & Fertilizer Management System</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN for visual charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        /* Custom scrollbar for themed look */
        #content::-webkit-scrollbar { width: 8px; }
        #content::-webkit-scrollbar-track { background: #E5E7EB; }
        #content::-webkit-scrollbar-thumb { background-color: #A9D18E; border-radius: 20px; border: 2px solid #E5E7EB; }

        /* Hide sidebar toggle on desktop */
        .sidebar-toggle-mobile { display: none; }
        
        /* Transition for smooth sidebar open/close */
        #sidebar { transition: transform 0.3s ease-in-out; }

        /* Media queries for responsiveness */
        @media (max-width: 768px) {
            #sidebar {
                position: fixed;
                height: 100%;
                z-index: 50;
                transform: translateX(-100%);
            }
            #sidebar.open {
                transform: translateX(0);
            }
            .sidebar-toggle-mobile {
                display: block;
                z-index: 60; /* Above sidebar */
                position: fixed;
                top: 1rem;
                left: 1rem;
            }
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'agri-green': '#38761D', // Primary Green
                        'agri-dark': '#1C370E', // Darker Green (for background/text)
                        'agri-yellow': '#F9D749', // Accent Yellow
                        'agri-light': '#D9EAD3', // Light Green (for hover/accents)
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<body class="font-sans antialiased bg-gray-50">

    <!-- Mobile Sidebar Toggle -->
    <button id="sidebar-toggle" class="sidebar-toggle-mobile bg-agri-green text-white p-3 rounded-full shadow-lg hover:bg-agri-dark transition">
        <i class="fas fa-bars"></i>
    </button>

    <div id="app" class="flex h-screen">
        <!-- Sidebar Navigation -->
        <nav id="sidebar" class="w-64 bg-agri-dark text-white shadow-2xl flex-shrink-0 md:relative">
            <div class="p-6">
                <h1 class="text-3xl font-extrabold text-agri-yellow tracking-tight">AgriSys</h1>
                <p class="text-xs text-agri-light opacity-75 mt-1">Management Dashboard</p>
            </div>
            
            <ul class="space-y-2 p-4 pt-0">
                <li class="nav-item" data-page="dashboard"><i class="fas fa-chart-line w-5 mr-3"></i>Dashboard</li>
                <li class="nav-item" data-page="forms"><i class="fas fa-edit w-5 mr-3"></i>Data Input Forms</li>
                <li class="nav-item" data-page="reports"><i class="fas fa-file-alt w-5 mr-3"></i>System Report</li>
                <li class="nav-item" data-page="design-docs"><i class="fas fa-project-diagram w-5 mr-3"></i>Design Diagrams</li>
            </ul>

            <div class="p-6 border-t border-agri-green mt-4">
                <p class="text-sm text-agri-light opacity-80">Quick Stats</p>
                <div class="mt-2 text-xs">
                    <p>Crops Tracked: <span class="font-bold text-agri-yellow">12</span></p>
                    <p>Active Fields: <span class="font-bold text-agri-yellow">4</span></p>
                    <p>Avg Germination: <span class="font-bold text-agri-yellow">92%</span></p>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main id="content" class="flex-1 overflow-y-auto p-4 md:p-8">
            <!-- Content will be injected here by JavaScript -->
            <div id="page-content">
                <h2 class="text-3xl font-bold text-agri-dark mb-6">Loading...</h2>
            </div>
        </main>
    </div>

    <script>
        // --- Configuration and Data ---
        const PAGES = {
            DASHBOARD: 'dashboard',
            FORMS: 'forms',
            REPORTS: 'reports',
            DESIGN_DOCS: 'design-docs',
        };

        const mockData = {
            seedQuality: {
                totalLots: 15,
                avgGermination: 0.92,
                bestPerformer: "Corn 2024 (98%)"
            },
            fertilizerSchedule: {
                pendingApplications: 3,
                nextDate: "2025-05-10",
                lastApplied: "Urea (2025-04-20)"
            },
            growthMonitoring: {
                activeCrops: 4,
                avgGrowthRate: "2.5 cm/day",
                alertThresholds: 1
            },
            yieldData: {
                // Ensure the value is space-separated for easy parsing
                avgYield: "7.8 tons/hectare", 
                lastCrop: "Wheat 2024",
                comparisonChange: "+4%"
            },
            chartData: {
                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                growth: [5, 12, 28, 55, 70, 85], // Height (cm)
                dosage: [100, 150, 150, 200, 200, 250], // NPK Dosage (kg/Ha)
                yieldComparison: {
                    labels: ['Wheat', 'Corn', 'Soybean'],
                    current: [7.8, 11.2, 3.5],
                    lastYear: [7.5, 10.8, 3.3]
                }
            }
        };

        // --- Utility Functions ---

        /**
         * Initializes a Chart.js instance on the given canvas ID.
         * Note: The old chart logic was flawed (only one chart could exist).
         * This updated logic correctly destroys any existing chart on the canvas before creation.
         * @param {string} canvasId - The ID of the canvas element.
         * @param {string} type - 'bar' or 'line'.
         * @param {string} label - Dataset label.
         * @param {Array} labels - X-axis labels.
         * @param {Array} data - Y-axis data.
         * @param {string} color - Hex color for the fill/border.
         */
        function initializeChart(canvasId, type, label, labels, data, color) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            
            // Safely destroy existing chart instance on this canvas if it exists
            const existingChart = Chart.getChart(canvasId);
            if (existingChart) {
                existingChart.destroy();
            }

            const chartConfig = {
                type: type,
                data: {
                    labels: labels,
                    datasets: [{
                        label: label,
                        data: data,
                        backgroundColor: color + '90', // Add some opacity
                        borderColor: color,
                        borderWidth: 2,
                        tension: type === 'line' ? 0.4 : 0,
                        fill: type === 'line' ? true : false,
                        pointRadius: type === 'line' ? 5 : 0,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true, position: 'top' },
                        title: { display: true, text: label, font: { size: 16 } }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            };
            
            if (type === 'bar' && label.includes('Comparison')) {
                 chartConfig.data.datasets = [
                    {
                        label: 'Current Year Yield (t/ha)',
                        data: mockData.chartData.yieldComparison.current,
                        backgroundColor: '#38761D', // agri-green
                        borderColor: '#38761D',
                        borderWidth: 1,
                    },
                    {
                        label: 'Last Year Yield (t/ha)',
                        data: mockData.chartData.yieldComparison.lastYear,
                        backgroundColor: '#F9D749', // agri-yellow
                        borderColor: '#F9D749',
                        borderWidth: 1,
                    }
                ];
                chartConfig.options.scales.x = {
                    stacked: false,
                };
                chartConfig.options.scales.y = {
                    stacked: false,
                    beginAtZero: true
                };
            }

            new Chart(ctx, chartConfig); // Create the new chart instance
        }

        /**
         * Renders the key metric cards for the dashboard.
         */
        function renderDashboardCards() {
            const cards = [
                {
                    title: "Seed Quality Score",
                    value: (mockData.seedQuality.avgGermination * 100).toFixed(0) + '%',
                    icon: 'fas fa-seedling',
                    detail: `Best lot: ${mockData.seedQuality.bestPerformer}`,
                    color: 'bg-green-600'
                },
                {
                    title: "Pending Fertilizer Applications",
                    value: mockData.fertilizerSchedule.pendingApplications,
                    icon: 'fas fa-flask',
                    detail: `Next Application: ${mockData.fertilizerSchedule.nextDate}`,
                    color: 'bg-yellow-600'
                },
                {
                    title: "Avg. Crop Growth Rate",
                    value: mockData.growthMonitoring.avgGrowthRate,
                    icon: 'fas fa-chart-area',
                    detail: `Active Fields: ${mockData.growthMonitoring.activeCrops}`,
                    color: 'bg-agri-dark'
                },
                {
                    // Updated icon and color for yield/harvest theme
                    title: "Estimated Yield (Avg.)",
                    value: mockData.yieldData.avgYield,
                    icon: 'fas fa-tractor',
                    detail: `Last harvest change: ${mockData.yieldData.comparisonChange}`,
                    color: 'bg-orange-500' 
                }
            ];

            return cards.map(card => {
                let valueHTML;
                
                // Special handling for Estimated Yield to separate number and unit
                if (card.title === "Estimated Yield (Avg.)") {
                    const parts = card.value.split(' '); // ["7.8", "tons/hectare"]
                    const num = parts[0];
                    const unit = parts.slice(1).join(' ');
                    
                    // Render the number in 3xl and the unit slightly smaller in a new line
                    valueHTML = `
                        <p class="text-3xl font-extrabold text-gray-900 mt-1 leading-tight">${num}</p>
                        <p class="text-xl font-bold text-gray-700 leading-snug">${unit}</p>
                    `;
                } else {
                    // Default rendering for other cards
                    valueHTML = `<p class="text-3xl font-extrabold text-gray-900 mt-1">${card.value}</p>`;
                }
                
                return `
                    <div class="bg-white p-6 rounded-xl shadow-lg flex items-start space-x-4 transition transform hover:scale-[1.02]">
                        <div class="p-3 ${card.color} text-white rounded-full text-2xl shadow-md">
                            <i class="${card.icon}"></i>
                        </div>
                        <!-- flex-1 and min-w-0 ensure text container takes space and wraps correctly -->
                        <div class="flex-1 min-w-0"> 
                            <p class="text-sm font-medium text-gray-500">${card.title}</p>
                            
                            <!-- Value/Unit rendering block -->
                            ${valueHTML}

                            <p class="text-xs text-gray-400 mt-2">${card.detail}</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // --- Page Content Functions ---

        function renderDashboard() {
            const contentDiv = document.getElementById('page-content');
            contentDiv.innerHTML = `
                <h2 class="text-3xl font-bold text-agri-dark mb-8">Farm Analytics Dashboard</h2>
                
                <!-- Key Metrics Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                    ${renderDashboardCards()}
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Crop Growth Monitoring Chart -->
                    <div class="bg-white p-6 rounded-xl shadow-lg h-96">
                        <canvas id="growthChart"></canvas>
                    </div>
                    <!-- Fertilizer Dosage Chart -->
                    <div class="bg-white p-6 rounded-xl shadow-lg h-96">
                        <canvas id="dosageChart"></canvas>
                    </div>
                    <!-- Yield Comparison Chart -->
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg h-96">
                        <canvas id="yieldChart"></canvas>
                    </div>
                </div>
            `;

            // Wait for elements to be in DOM before creating charts
            setTimeout(() => {
                initializeChart(
                    'growthChart', 
                    'line', 
                    'Crop Growth Monitoring (Sunflower Height in cm)', 
                    mockData.chartData.labels, 
                    mockData.chartData.growth, 
                    '#38761D' // agri-green
                );
                initializeChart(
                    'dosageChart', 
                    'bar', 
                    'Fertilizer Dosage Applied (NPK kg/Ha)', 
                    mockData.chartData.labels, 
                    mockData.chartData.dosage, 
                    '#F9D749' // agri-yellow
                );
                initializeChart(
                    'yieldChart', 
                    'bar', 
                    'Yield Comparison by Crop Type (tons/Ha)', 
                    mockData.chartData.yieldComparison.labels, 
                    mockData.chartData.current, 
                    '#38761D' // agri-green for the bar
                );
            }, 50);
        }

        function renderForms() {
            const contentDiv = document.getElementById('page-content');
            contentDiv.innerHTML = `
                <h2 class="text-3xl font-bold text-agri-dark mb-8">Data Input Forms</h2>
                <p class="text-gray-600 mb-6">Use these forms to record vital data for accurate tracking and analysis.</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    ${renderFormCard('Seed Input', 'fas fa-seedling', 'Record new seed batch data, including lot number, supplier, and initial germination test results.', [
                        { label: "Seed Type", type: "text", placeholder: "e.g., Hybrid Corn" },
                        { label: "Lot Number", type: "text", placeholder: "S-2025-CORN-005" },
                        { label: "Germination Rate (%)", type: "number", placeholder: "95" },
                        { label: "Date Acquired", type: "date" }
                    ])}
                    
                    ${renderFormCard('Fertilizer Application', 'fas fa-flask', 'Log the type, quantity, and date of fertilizer applied to a specific field section.', [
                        { label: "Fertilizer Name", type: "text", placeholder: "e.g., 10-20-10 NPK" },
                        { label: "Field ID", type: "text", placeholder: "Field A-2" },
                        { label: "Dosage (kg/Ha)", type: "number", placeholder: "180" },
                        { label: "Application Date", type: "date" }
                    ])}
                    
                    ${renderFormCard('Germination Tracking', 'fas fa-leaf', 'Monitor the progress of seed germination in the initial weeks.', [
                        { label: "Crop Name", type: "text", placeholder: "Sunflower Batch 1" },
                        { label: "Date of Measurement", type: "date" },
                        { label: "Seedling Count / Area", type: "number", placeholder: "25 per sq meter" }
                    ])}
                    
                    ${renderFormCard('Crop Growth Record', 'fas fa-chart-area', 'Input physical measurements like height, leaf count, or biomass.', [
                        { label: "Crop Name", type: "text", placeholder: "Wheat Field B" },
                        { label: "Measurement Date", type: "date" },
                        { label: "Avg. Height (cm)", type: "number", placeholder: "65" },
                        { label: "Pest/Disease Status", type: "select", options: ["None", "Minor", "Severe"] }
                    ])}
                </div>
            `;
        }

        function renderFormCard(title, icon, description, fields) {
            const formFields = fields.map(field => {
                if (field.type === "select") {
                    const options = field.options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
                    return `
                        <label class="block text-sm font-medium text-gray-700 mt-3">${field.label}</label>
                        <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 bg-gray-50 focus:border-agri-green focus:ring focus:ring-agri-green/50">
                            ${options}
                        </select>
                    `;
                }
                return `
                    <label class="block text-sm font-medium text-gray-700 mt-3">${field.label}</label>
                    <input type="${field.type}" placeholder="${field.placeholder || ''}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 bg-gray-50 focus:border-agri-green focus:ring focus:ring-agri-green/50">
                `;
            }).join('');

            return `
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-agri-green">
                    <div class="flex items-center space-x-3 mb-4">
                        <i class="${icon} text-2xl text-agri-dark"></i>
                        <h3 class="text-xl font-semibold text-agri-dark">${title}</h3>
                    </div>
                    <p class="text-sm text-gray-500 mb-4">${description}</p>
                    <form onsubmit="event.preventDefault(); alert('Form submitted successfully: ' + '${title}');">
                        ${formFields}
                        <button type="submit" class="mt-6 w-full py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-agri-green hover:bg-agri-dark transition">
                            Save Record
                        </button>
                    </form>
                </div>
            `;
        }
        
        function renderDesignDocs() {
            const contentDiv = document.getElementById('page-content');
            contentDiv.innerHTML = `
                <h2 class="text-3xl font-bold text-agri-dark mb-8">System Design and Modeling Diagrams</h2>
                <p class="text-gray-600 mb-6">These artifacts provide a technical overview of the system architecture and business logic.</p>

                <div class="space-y-8">
                    ${renderDesignSection('E-R Diagram', 'fas fa-database', 'Illustrates the relationships between core entities: Field, SeedLot, FertilizerBatch, ApplicationRecord, and GrowthObservation.', 'ENTITY (Field) -- 1:M -- ENTITY (ApplicationRecord) -- 1:1 -- ENTITY (FertilizerBatch) etc. Key attributes: Field(ID, Location), SeedLot(LotID, GerminationRate), etc.')}
                                        
                    ${renderDesignSection('Use-Case Diagram', 'fas fa-users-cog', 'Shows how different actors (Farmer, Analyst, System) interact with the system functions (Manage Seeds, Track Growth, Generate Report).', 'ACTOR (Farmer) -- uses --> USE CASE (Track Growth). SYSTEM -- includes --> USE CASE (Send Alert).')}
                    
                    ${renderDesignSection('Class Diagram', 'fas fa-object-group', 'Defines the static structure of the system, including classes, attributes, and methods.', 'CLASS (Crop) with attributes: Height, HealthScore and methods: calculateGrowthRate(), updateHealth().')}
                    
                    ${renderDesignSection('Sequence Diagram', 'fas fa-sort-numeric-up', 'Models the interaction between objects in a time-ordered sequence for a specific scenario, e.g., "Recording a Fertilizer Application".', 'ACTOR (Farmer) -> System: Enter Application Details. System -> Database: SaveRecord(). Database -> System: Confirmation. System -> Farmer: Success Message.')}
                    
                    <h3 class="text-2xl font-bold text-agri-dark pt-4">Logic Modeling</h3>
                    ${renderDesignSection('Decision Table: Growth Alert', 'fas fa-table', 'Defines rules for triggering growth alerts based on two conditions: Growth Rate and Health Score.', 'Condition 1: Growth Rate (High/Medium/Low). Condition 2: Health Score (>80 / <80). Actions: Alert (Yes/No), Recommend Fertilization (Yes/No).')}
                    
                    ${renderDesignSection('Decision Tree: Fertilization Recommendation', 'fas fa-code-branch', 'Visualizes the branching logic for suggesting fertilizer types.', 'Root: Soil Type? -> Branch 1 (Loamy): Crop Type? -> Branch 2 (Corn): NPK 10-20-10.')}
                    
                    ${renderDesignSection('Activity Diagram: Germination Process', 'fas fa-redo-alt', 'Shows the flow of control from one activity to the next in the germination tracking process.', 'Start Node -> Activity (Plant Seed) -> Fork -> Activity (Monitor Daily) -> Join -> Decision (Threshold Met?) -> End Node.')}
                                    </div>
            `;
        }
        
        function renderDesignSection(title, icon, summary, content) {
            return `
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <div class="flex items-center space-x-3 mb-3">
                        <i class="${icon} text-xl text-agri-green"></i>
                        <h3 class="text-xl font-semibold text-agri-dark">${title}</h3>
                    </div>
                    <p class="text-gray-600 text-sm italic mb-3">${summary}</p>
                    <pre class="bg-agri-light p-4 rounded-lg overflow-x-auto text-agri-dark text-xs whitespace-pre-wrap">${content}</pre>
                </div>
            `;
        }

        function renderReports() {
            const reportSections = [
                {
                    title: "1. Introduction", 
                    content: "The Seeds and Fertilizer Management System (SFMS) is designed to optimize agricultural inputs and monitoring. By centralized data on seed quality, fertilizer application, and daily growth metrics, SFMS aims to empower farmers with data-driven decision-making, moving away from traditional guesswork."
                },
                {
                    title: "2. Problem Definition", 
                    content: "Current farming practices suffer from inefficient resource allocation, leading to suboptimal yields and unnecessary environmental impact. Lack of detailed historical data makes predictive analysis impossible. The problem SFMS addresses is the fragmented, manual, and reactive nature of managing crop inputs and monitoring growth."
                },
                {
                    title: "3. System Scope and Objectives", 
                    content: "SFMS will cover the entire crop cycle: from pre-planting seed lot analysis to post-harvest yield comparison. Key objectives include achieving a 10% reduction in fertilizer waste, a 5% increase in average crop yield, and providing real-time growth alerts via a centralized dashboard."
                },
                {
                    title: "4. Feasibility Study", 
                    content: "Technologically, the system is feasible using standard web technologies (HTML/JS/Tailwind) and available cloud database services (simulated). Economically, the ROI is high due to predicted savings on inputs. Operationally, the intuitive interface ensures quick adoption by farm managers and staff."
                },
                {
                    title: "5. Requirement Analysis", 
                    content: "Functional Requirements: User authentication, Seed Lot CRUD, Fertilizer Application recording, Growth Metric input, Chart Generation, Report Export. Non-Functional Requirements: Response time < 2s for all dashboard loads, 99.9% uptime, and full mobile responsiveness."
                },
                {
                    title: "6. Testing & Implementation Plan", 
                    content: "Testing will follow a four-stage approach: Unit testing for individual functions (e.g., growth rate calculation), Integration testing for form-to-database flow, User Acceptance Testing (UAT) with pilot farmers, and finally, deployment to a live environment after successful UAT."
                },
                {
                    title: "7. Limitations and Constraints", 
                    content: "The current system relies on manual data input for physical measurements (e.g., height, leaf count). It does not currently integrate with IoT sensors for automated data collection. The fertilizer recommendation model is simplified and requires calibration for specific local soil chemistries."
                },
                {
                    title: "8. Enhancements (Future Scope)", 
                    content: "Future enhancements include: full mobile application development, integration with drone imagery for automated health scoring, AI-driven predictive modeling for pest risk, and multi-lingual support for international farming operations."
                },
                {
                    title: "9. Bibliography", 
                    content: "[1] Smith, J. (2023). 'The Future of Digital Agriculture.' AgriTech Journal, 15(2), 45-60. [2] FAO. (2022). Guidelines for Sustainable Fertilizer Use. Rome: FAO Publications. [3] Tailwind CSS Documentation. (Current Version)."
                },
            ];
            
            const sectionsHTML = reportSections.map(section => `
                <div class="mb-6 pb-4 border-b border-gray-200">
                    <h3 class="text-xl font-semibold text-agri-green mb-2">${section.title}</h3>
                    <p class="text-gray-700 leading-relaxed">${section.content}</p>
                </div>
            `).join('');

            const contentDiv = document.getElementById('page-content');
            contentDiv.innerHTML = `
                <h2 class="text-3xl font-bold text-agri-dark mb-4">System Analysis and Design Report</h2>
                <p class="text-gray-600 mb-8 italic">Comprehensive documentation for the Seeds and Fertilizer Management System (SFMS)</p>
                
                <div class="bg-white p-8 rounded-xl shadow-2xl">
                    ${sectionsHTML}
                </div>
            `;
        }


        // --- Navigation and Initialization ---

        function renderPage(pageName) {
            const pageContent = document.getElementById('page-content');
            const navItems = document.querySelectorAll('.nav-item');
            
            // Update active state in sidebar
            navItems.forEach(item => {
                if (item.dataset.page === pageName) {
                    item.classList.add('bg-agri-green', 'font-bold');
                    item.classList.remove('hover:bg-green-700');
                } else {
                    item.classList.remove('bg-agri-green', 'font-bold');
                    item.classList.add('hover:bg-green-700');
                }
            });

            // Toggle sidebar visibility on mobile
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.remove('open');
            
            // Render the specific page content
            switch (pageName) {
                case PAGES.DASHBOARD:
                    renderDashboard();
                    break;
                case PAGES.FORMS:
                    renderForms();
                    break;
                case PAGES.REPORTS:
                    renderReports();
                    break;
                case PAGES.DESIGN_DOCS:
                    renderDesignDocs();
                    break;
                default:
                    pageContent.innerHTML = `<h2 class="text-3xl font-bold text-red-500">404: Page Not Found</h2>`;
            }

            currentPage = pageName;
        }

        function init() {
            // Set up navigation listeners
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.add('p-3', 'rounded-lg', 'cursor-pointer', 'transition');
                item.addEventListener('click', (e) => {
                    const page = e.currentTarget.dataset.page;
                    window.history.pushState({ page: page }, '', `#${page}`);
                    renderPage(page);
                });
            });

            // Setup mobile toggle
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('open');
            });
            
            // Initial page load based on URL hash or default to dashboard
            const initialPage = window.location.hash.substring(1) || PAGES.DASHBOARD;
            renderPage(initialPage);
            
            // Handle browser back/forward buttons
            window.addEventListener('popstate', (e) => {
                const page = e.state ? e.state.page : PAGES.DASHBOARD;
                renderPage(page);
            });
        }

        // Start the application
        window.onload = init;
    </script>
</body>
</html>
